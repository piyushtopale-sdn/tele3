<div class="makeeprescription dashboard_main_content">
  <div class="profile_data">
    <div class="profile_info">
      <div class="profile_info_inner profile_info_with_img">
        <div class="patient-details-block d-flex align-items-center">
          <div class="profile_image">
            <img
              [src]="
                patientSubscriberphoto
                  ? patientSubscriberphoto
                  : '../../../../../assets/img/default_user.png'
              "
            />
          </div>
          <div class="profile__img-contents">
            <div class="profile_title">
              {{ profile?.full_name }}
            </div>
            <div class="profile_contact">
              <div class="user_value">
                {{ profile?.email ? profile?.email : "-" }}
              </div>
            </div>
            <div class="mobile-no-block d-flex align-items-center">
              <div class="user_value mob_no">
                {{ profile?.country_code }} {{ profile?.mobile }}
              </div>
              <div class="vertical_line"></div>
              <div class="user_value mob_no">
                {{ profile?.address ? profile?.address : "-" }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="emergency_contact">
        <!-- <h3 class="profileinfo_title">{{ "emergency_contact" | translate }}</h3> -->
        <ul class="profile_info_inner emergency">
          <li class="col_item">
            <div class="profile_contact">
              <div class="lable">{{ "gender" | translate }}</div>
              <div class="user_value">
                {{
                  profile?.gender
                    ? profile?.gender
                    : "-"
                }}
              </div>
            </div>
          </li>
          <li class="col_item">
            <div class="profile_contact">
              <div class="lable">{{ "age" | translate }}</div>
              <div class="user_value">
                {{ profile?.dob ? calculateAge(profile.dob) : "-" }}  {{"years" | translate}}
              </div>
            </div>
          </li>
          <li class="col_item">
            <div class="profile_contact">
              <div class="lable">{{ "mrn_number" | translate }}</div>
              <div class="user_value">
                {{
                  profile?.mrn_number
                    ? profile?.mrn_number
                    : "-"
                }}
              </div>
            </div>
          </li>
          <li class="col_item" *ngIf="profile?.iqama_number">
            <div class="profile_contact">
              <div class="lable">{{ "iqama_number" | translate }}</div>
              <div class="user_value">
                {{ profile?.iqama_number }}
              </div>
            </div>
          </li>
          <li class="col_item" *ngIf="profile?.passport">
            <div class="profile_contact">
              <div class="lable">{{ "passport" | translate }}</div>
              <div class="user_value">
                {{ profile?.passport }}
              </div>
            </div>
          </li>
          <li class="col_item" *ngIf="profile?.saudi_id">
            <div class="profile_contact">
              <div class="lable">{{ "saudi_id" | translate }}</div>
              <div class="user_value">
                {{ profile?.saudi_id }}
              </div>
            </div>
          </li>
          
          <li class="col_item">
            <div class="profile_contact">
              <div class="lable">{{ "emergency_contact" | translate }}</div>
              <div class="user_value">
                {{
                  profile?.emergency_contact?.phone_number
                    ? profile?.emergency_contact?.phone_number
                    : "-"
                }}
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col">
      <div class="main_title">{{ "medicines" | translate }}</div>
      <div class="top_bar">
        <div class="search_bar common_content">
          <div class="input-group">
            <button class="btn search-btn">
              <mat-icon>search</mat-icon>
            </button>
            <input
              type="text"
              class="matinput"
              placeholder="Search Medicine Name"
              (click)="handleClick($event)"
              (keypress)="handleMedicineChange($event)"
              aria-label="Search......"
              matInput
              style="width: 93%"
              [formControl]="myControl"
              [matAutocomplete]="auto"
            />
            <mat-autocomplete #auto="matAutocomplete">
              <ng-container *ngFor="let option of filteredOptions | async">
                <mat-option
                  *ngIf="option != 'No data'"
                  [value]="option.scientificName"
                >
                  <span (click)="changeMedicine(option)">
                    {{ option.scientificName }} ( {{ option.tradeName }} )
                  </span>

                  <span
                    placement="top"
                    (click)="openCommentPopup(medicinecontent, option?._id)"
                    style="
                      position: absolute;

                      font-size: 17px;

                      margin-top: 16px;

                      margin-left: 5px;
                    "
                    class="material-icons"
                    >{{ "info" | translate }}</span
                  >
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </div>
        </div>
      </div>

      <div class="bottom_bar">
        <div class="prescription">
          <div class="item" *ngFor="let med of finalArray; let i = index">
            <div class="left_part">
              <h2>{{ med?.medicineName }}({{ med?.tradeName }})</h2>
              <div
                class="prescribetime"
                *ngFor="
                  let doseStatement of returnDosagesForMedicine(med?.medicineId)
                "
              >
                {{ doseStatement }}
              </div>
            </div>
            <div class="right_part">
              <div class="icon_group">
                <a
                  class="svgicon"
                  (click)="openCommentPopup(medicinecontent, med?.medicineId)"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
                    <path
                      opacity="3"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M6.11591 0.0388641C3.53288 0.391143 1.40424 2.05956 0.459047 4.47271C0.13993 5.28741 0 6.05754 0 6.999C0 8.17418 0.232255 9.15496 0.75255 10.177C1.82301 12.2799 3.89752 13.7151 6.2377 13.9719C6.57282 14.0087 7.42955 14.0095 7.75556 13.9733C11.0236 13.6107 13.6188 11.0178 13.9722 7.76207C14.0088 7.42575 14.0094 6.56879 13.9733 6.24386C13.7127 3.89373 12.2828 1.81976 10.189 0.754928C9.42286 0.365276 8.73007 0.151943 7.86087 0.0379579C7.47175 -0.013062 6.4929 -0.0125403 6.11591 0.0388641ZM7.31631 2.64283C7.65242 2.73279 7.99111 2.99824 8.13692 3.28605C8.39487 3.7952 8.31588 4.34835 7.92563 4.76562C7.42038 5.30586 6.58081 5.30586 6.07556 4.76562C5.90027 4.57818 5.81494 4.42367 5.75087 4.17763C5.54972 3.40516 6.17389 2.61213 6.98687 2.60727C7.09256 2.60664 7.24081 2.62265 7.31631 2.64283ZM7.39905 6.14789C7.62895 6.227 7.76391 6.31366 7.92887 6.48811C8.09066 6.65924 8.22057 6.91019 8.26287 7.1333C8.27978 7.22249 8.29074 7.86493 8.29049 8.75328C8.29005 10.35 8.28453 10.4206 8.13692 10.7119C8.0973 10.7902 7.99462 10.9244 7.90875 11.0103C7.49733 11.4218 6.92071 11.5069 6.38438 11.2352C6.20785 11.1458 5.95542 10.8918 5.86427 10.7119C5.71666 10.4206 5.71114 10.35 5.7107 8.75328C5.71045 7.86493 5.72141 7.22249 5.73832 7.1333C5.79888 6.81389 6.01384 6.48797 6.29049 6.29622C6.57559 6.0986 7.06539 6.03305 7.39905 6.14789Z"
                    />
                  </svg>
                </a>
                <!-- <a class="svgicon" (click)="changeMedicine(med,'edit')">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12">
                    <path
                      opacity="3"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M10.5142 0.0229199C10.3428 0.0573628 10.1536 0.141476 10.0166 0.244171C9.94218 0.300012 9.72307 0.505285 9.52976 0.700352L9.17827 1.05501L10.063 1.94044L10.9477 2.82587L11.3237 2.45061C11.7438 2.03136 11.8395 1.90759 11.9242 1.6743C12.0906 1.21545 11.979 0.720952 11.6302 0.371924C11.3334 0.0748893 10.9118 -0.0569464 10.5142 0.0229199ZM6.64187 3.59457C5.03559 5.20381 4.6412 5.61079 4.62404 5.67686C4.61229 5.72203 4.52518 6.14963 4.43044 6.62709C4.31571 7.20542 4.26371 7.51693 4.27468 7.56031C4.29571 7.64339 4.36459 7.71235 4.44763 7.7334C4.5351 7.75559 6.32498 7.39974 6.41623 7.34202C6.45238 7.31917 7.36806 6.41253 8.4511 5.32729L10.4203 3.35415L9.54134 2.47426C9.05794 1.99034 8.65701 1.59439 8.65039 1.59439C8.64378 1.59439 7.73994 2.49446 6.64187 3.59457ZM1.27858 2.01904C0.801035 2.08971 0.368127 2.40948 0.154276 2.84954C-0.00886787 3.18522 -0.00024066 2.95256 0.000204767 7.00711C0.000673638 11.0892 -0.00959462 10.8343 0.168764 11.1905C0.339315 11.5312 0.644737 11.7944 1.03519 11.9371L1.20715 12H4.99328H8.7794L8.96695 11.9363C9.45195 11.7716 9.813 11.3872 9.9558 10.8835C9.99568 10.7429 9.99847 10.5901 9.99847 8.54919V6.36534L9.92778 6.25089C9.82569 6.08565 9.65157 5.9963 9.46356 6.01273C9.29873 6.02711 9.17157 6.10357 9.07852 6.2443L9.01384 6.34207L9.00212 8.50235C8.9914 10.4772 8.98697 10.6689 8.95056 10.7354C8.8943 10.8382 8.76044 10.9493 8.65672 10.9794C8.59422 10.9975 7.50926 11.0029 4.94437 10.998L1.32036 10.9911L1.22857 10.927C1.1781 10.8917 1.11044 10.8238 1.07821 10.7762L1.0196 10.6896L1.01353 7.03304C1.0076 3.46853 1.00858 3.37432 1.0524 3.28904C1.07713 3.24094 1.12735 3.17309 1.16396 3.13829C1.31372 2.99606 1.21017 3.00214 3.48356 3.00214C5.06037 3.00214 5.58551 2.99517 5.6587 2.97328C5.79228 2.93335 5.9376 2.78251 5.9765 2.64347C6.03895 2.42022 5.94597 2.18618 5.7487 2.07014L5.63797 2.00498L3.52806 2.00168C2.3676 1.99987 1.35533 2.00766 1.27858 2.01904Z"
                    />
                  </svg>
                </a> -->
                <a class="svgicon" (click)="removeDosage(i)">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="19"
                    height="19"
                    viewBox="0 0 19 19"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M15.6025 4.45371C15.8943 4.45371 16.1372 4.69596 16.1372 5.0042V5.2892C16.1372 5.58995 15.8943 5.8397 15.6025 5.8397H3.1726C2.8801 5.8397 2.63721 5.58995 2.63721 5.2892V5.0042C2.63721 4.69596 2.8801 4.45371 3.1726 4.45371H5.35938C5.80359 4.45371 6.19018 4.13796 6.29011 3.69247L6.40463 3.18097C6.58261 2.48423 7.16833 2.02148 7.83866 2.02148H10.9358C11.5988 2.02148 12.1911 2.48423 12.3625 3.14422L12.485 3.69172C12.5842 4.13796 12.9708 4.45371 13.4158 4.45371H15.6025ZM14.4916 14.872C14.7199 12.7443 15.1196 7.68933 15.1196 7.63833C15.1342 7.48383 15.0839 7.33758 14.9839 7.21983C14.8767 7.10958 14.741 7.04433 14.5915 7.04433H4.1886C4.03834 7.04433 3.89537 7.10958 3.79617 7.21983C3.69551 7.33758 3.64591 7.48383 3.65321 7.63833C3.65455 7.6477 3.66889 7.82576 3.69287 8.12345C3.79939 9.44588 4.09608 13.1291 4.2878 14.872C4.42347 16.156 5.26594 16.963 6.48625 16.9922C7.42793 17.014 8.39805 17.0215 9.39005 17.0215C10.3244 17.0215 11.2734 17.014 12.2442 16.9922C13.5069 16.9705 14.3486 16.1777 14.4916 14.872Z"
                    />
                  </svg>
                </a>
              </div>
            </div>
          </div>
          <div class="primary_btn">
            <button class="btn btn-primary" (click)="createEprescription()">
              {{ "submit" | translate }}
            </button>
            <button class="btn btn-primary" *ngIf="!showAddButtton" (click)="routeBack()">
              {{ "back" | translate }}
            </button>
            <button class="btn btn-primary" *ngIf="showAddButtton" (click)="routeToProfile()">
              {{ "back" | translate }}
            </button> 
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ---------------------------------------Medicine modal---------------------------------------- -->
<ng-template #medicinecontent let-modal>
  <div class="custome_modal abc">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        {{ selectedmedicineinfo?.scientificName }}
      </h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body medicine">
      <div class="medicine_content">
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "registerNumber" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.registerNumber }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "registerYear" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.registerYear }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "productType" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.productType }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "drugType" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.drugType }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "subType" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.subType }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "scientificNameArabic" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.scientificNameArabic }}
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "tradeName" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.tradeName }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "tradeNameArabic" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.tradeNameArabic }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "strength" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.strength }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "strengthUnit" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.strengthUnit }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "pharmaceuticalForm" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.pharmaceuticalForm }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "administrationRoute" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.administrationRoute }}
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "ATCCode1" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.ATCCode1 }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "ATCCode2" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.ATCCode2 }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "size" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.size }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "sizeUnit" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.sizeUnit }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "packageSize" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.packageSize }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "legalStatus" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.legalStatus }}
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "productControlDistributeArea" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.productControlDistributeArea }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "publicPrice" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.publicPrice }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "pricingDate" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.pricingDate }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "shelfLife" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.shelfLife }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "storageConditions" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.storageConditions }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "marketingCompany" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.marketingCompany }}
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "marketingCountry" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.marketingCountry }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "manufactureName" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.manufactureName }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "manufactureCountry" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.manufactureCountry }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "manufactureName2" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.manufactureName2 }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "manufactureCountry2" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.manufactureCountry2 }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "secondaryPackageManufacture" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.secondaryPackageManufacture }}
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "mainAgent" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.mainAgent }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">
                {{ "secondAgent" | translate }}
              </div>
              <div class="value">
                {{ selectedmedicineinfo?.secondAgent }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "thirdAgent" | translate }}</div>
              <div class="value">{{ selectedmedicineinfo?.thirdAgent }}</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "authorizationStatus" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.authorizationStatus }}
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-4 medicine_item">
            <div class="item">
              <div class="label">{{ "marketingStatus" | translate }}</div>
              <div class="value">
                {{ selectedmedicineinfo?.marketingStatus }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- ---------------------------------------Rabeprazole modal---------------------------------------- -->
<ng-template #rabeprazolecontent let-modal>
  <div class="custome_modal">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        {{ selectedMedicine?.scientificName }}
      </h4>
      <button
        type="button"
        class="btn-close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body">
      <div class="medicine_content">
        <div class="row">
          <div class="col-12">
            <form [formGroup]="dosageForm">
              <ng-container formArrayName="dosages">
                <ng-container *ngFor="let _ of dosages.controls; let i = index">
                  <ng-container [formGroupName]="i">
                    <div class="subscribe_detail_inner" *ngIf="i === 0">
                      <mat-accordion>
                        <mat-expansion-panel [expanded]="i === 0">
                          <div class="expansion_panel">
                            <div class="expansion_panel_inner">
                              <div class="dosage_item frequency_wrapper">
                                <div class="form_field_wrapper">
                                  <label
                                    style="color: #222222; font-weight: 500"
                                    >{{ "dose" | translate
                                    }}<span class="danger">*</span></label
                                  >
                                  <mat-form-field appearance="fill">
                                    <input
                                      type="text"
                                      matInput
                                      formControlName="dose"
                                    />
                                  </mat-form-field>
                                  <mat-error
                                    *ngIf="
                                      dosageForm.get(['dosages', i, 'dose'])
                                        .invalid &&
                                      dosageForm.get(['dosages', i, 'dose'])
                                        .touched
                                    "
                                  >
                                    {{ "field_is_required" | translate }}
                                  </mat-error>
                                </div>
                                <div class="form_field_wrapper">
                                  <label
                                    style="color: #222222; font-weight: 500"
                                    >{{ "dose_unit" | translate
                                    }}<span class="danger">*</span></label
                                  >
                                  <mat-form-field appearance="fill">
                                    <input
                                      type="text"
                                      matInput
                                      formControlName="doseUnit"
                                    />
                                  </mat-form-field>
                                  <mat-error
                                    *ngIf="
                                      dosageForm.get(['dosages', i, 'doseUnit'])
                                        .invalid &&
                                      dosageForm.get(['dosages', i, 'doseUnit'])
                                        .touched
                                    "
                                  >
                                    {{ "field_is_required" | translate }}
                                  </mat-error>
                                </div>
                                <div class="form_field_wrapper">
                                  <label
                                    style="color: #222222; font-weight: 500"
                                    >{{
                                      "route_Of_administration" | translate
                                    }}
                                    <span class="danger">*</span></label
                                  >
                                  <mat-form-field appearance="fill">
                                    <!-- <mat-label>Sub-admin</mat-label> -->
                                    <mat-select
                                      disableRipple
                                      formControlName="routeOfAdministration"
                                    >
                                      <mat-option value="ORAL">{{
                                        "Oral" | translate
                                      }}</mat-option>
                                      <mat-option value="INTRAVENOUS">{{
                                        "Intravenous" | translate
                                      }}</mat-option>
                                      <mat-option value="INTRAMUSCULAR">{{
                                        "Intramuscular" | translate
                                      }}</mat-option>
                                      <mat-option value="OTIC">{{
                                        "Otic" | translate
                                      }}</mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                  <mat-error
                                    *ngIf="
                                      dosageForm.get([
                                        'dosages',
                                        i,
                                        'routeOfAdministration'
                                      ]).invalid &&
                                      dosageForm.get([
                                        'dosages',
                                        i,
                                        'routeOfAdministration'
                                      ]).touched
                                    "
                                  >
                                    {{ "field_is_required" | translate }}
                                  </mat-error>
                                </div>
                                <div class="frequency mt-2">
                                  <label class="title">{{
                                    "frequency" | translate
                                  }}</label>

                                  <div
                                    class="dose_time"
                                    formGroupName="frequency"
                                  >
                                    <div class="item">
                                      <label>{{ "morning" | translate }}</label>
                                      <div class="quantity">
                                        <mat-icon
                                          (mwlClick)="handleMinus('morning', i)"
                                          >remove</mat-icon
                                        >
                                        <input
                                          type="number"
                                          matInput
                                          formControlName="morning"
                                          [readonly]="true"
                                        />
                                        <mat-icon
                                          (mwlClick)="handleAdd('morning', i)"
                                          >add</mat-icon
                                        >
                                      </div>
                                    </div>
                                    <div class="item">
                                      <label>{{ "midday" | translate }}</label>
                                      <div class="quantity">
                                        <mat-icon
                                          (mwlClick)="handleMinus('midday', i)"
                                          >remove</mat-icon
                                        >
                                        <input
                                          type="number"
                                          matInput
                                          formControlName="midday"
                                          [readonly]="true"
                                        />
                                        <mat-icon
                                          (mwlClick)="handleAdd('midday', i)"
                                          >add</mat-icon
                                        >
                                      </div>
                                    </div>
                                  </div>
                                  <div
                                    class="dose_time"
                                    formGroupName="frequency"
                                  >
                                    <div class="item">
                                      <label>{{ "evening" | translate }}</label>
                                      <div class="quantity">
                                        <mat-icon
                                          (mwlClick)="handleMinus('evening', i)"
                                          >remove</mat-icon
                                        >
                                        <input
                                          type="number"
                                          matInput
                                          formControlName="evening"
                                          [readonly]="true"
                                        />
                                        <mat-icon
                                          (mwlClick)="handleAdd('evening', i)"
                                          >add</mat-icon
                                        >
                                      </div>
                                    </div>
                                    <div class="item">
                                      <label>{{ "night" | translate }}</label>
                                      <div class="quantity">
                                        <mat-icon
                                          (mwlClick)="handleMinus('night', i)"
                                          >remove</mat-icon
                                        >
                                        <input
                                          type="number"
                                          matInput
                                          formControlName="night"
                                          [readonly]="true"
                                        />
                                        <mat-icon
                                          (mwlClick)="handleAdd('night', i)"
                                          >add</mat-icon
                                        >
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="take_for_wrapper">
                                <div class="dosage_item take_for">
                                  <label class="title">{{
                                    "take_for" | translate
                                  }}</label>
                                  <div
                                    class="dose_time"
                                    formGroupName="takeFor"
                                  >
                                    <div class="item">
                                      <div class="quantity">
                                        <mat-icon
                                          (mwlClick)="handleMinus('takeFor', i)"
                                          >remove</mat-icon
                                        >
                                        <input
                                          type="number"
                                          matInput
                                          formControlName="quantity"
                                          [readonly]="true"
                                        />
                                        <mat-icon
                                          (mwlClick)="handleAdd('takeFor', i)"
                                          >add</mat-icon
                                        >
                                      </div>
                                    </div>
                                    <mat-button-toggle-group
                                      name="fontStyle"
                                      aria-label="Font Style"
                                      formControlName="type"
                                    >
                                      <mat-button-toggle value="DAYS">{{
                                        "days" | translate
                                      }}</mat-button-toggle>
                                      <mat-button-toggle value="WEEKS">{{
                                        "weeks" | translate
                                      }}</mat-button-toggle>
                                      <mat-button-toggle value="MONTH">{{
                                        "month" | translate
                                      }}</mat-button-toggle>
                                    </mat-button-toggle-group>
                                  </div>
                                </div>
                                <div class="dosage_item take_for">
                                  <div
                                    class="form_field_wrapper"
                                    style="width: 33%"
                                  >
                                    <label
                                      style="color: #222222; font-weight: 500"
                                      >{{ "quantities" | translate
                                      }}</label
                                    >
                                    <mat-form-field appearance="fill">
                                      <input
                                        type="number"
                                        matInput
                                        formControlName="quantity"
                                        style="text-align: center"
                                        [readonly] = true
                                      />
                                    </mat-form-field>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </mat-expansion-panel>
                      </mat-accordion>
                    </div>
                  </ng-container>
                </ng-container>
              </ng-container>
            </form>
          </div>
          <div class="d-flex align-items-center justify-content-center gap-4">
            <button class="btn btn-primary" (click)="closePopup()">
              {{ "cancel" | translate }}
            </button>
            <button class="btn btn-primary" (click)="saveMedicineAdded()">
              {{ "save" | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
