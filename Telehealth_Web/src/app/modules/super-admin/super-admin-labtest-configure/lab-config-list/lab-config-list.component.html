<div class="doctor_list dashboard_main_content">
    <div class="top_bar">
      <div class="left_part">
        <div class="search_bar common_content">
          <div class="input-group">
            <button class="btn search-btn">
              <mat-icon>search</mat-icon>
            </button>
            <input
              type="search"
              class="form-control"
              placeholder="Search..."
              aria-label="Search"
              [ngModel]="searchText"
              #text
              (keyup)="handleSearchFilter(text.value)"
              (search)="handleSearchFilter(text.value)"
            />
          </div>
        </div>
      </div>
      <div class="right_part">
        <div class="primary_btn">
            <button
              type="button"
              class="btn btn-primary"
              (click)="exportManageTest()"
            >
              <mat-icon>download</mat-icon>{{ "export" | translate }}
            </button>
            <button
              type="button"
              class="btn btn-primary"
             [routerLink]="['/super-admin/test-configuration/add-test']" routerLinkActive="router-link-active" 
            >
              {{ "add_test" | translate }}
            </button>

              <button
                type="button"
                class="btn btn-primary"
                (click)="openVerticallyCenteredimport(importSubTest)"
              >
                <a class="btn_svg"
                  ><svg
                    width="17"
                    height="15"
                    viewBox="0 0 19 17"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M2.70702 0.0104581C2.35458 0.068045 2.14937 0.132128 1.86268 0.274083C1.40132 0.502557 0.97754 0.942847 0.758933 1.42088C0.482758 2.0248 0.50022 1.57399 0.50022 8.09617C0.50022 12.9014 0.509776 14.035 0.55184 14.2135C0.717983 14.9191 1.21541 15.5686 1.8243 15.875C2.38912 16.1593 2.18433 16.1464 6.14194 16.1464H9.71119L9.88221 16.0467C9.97624 15.9919 10.1037 15.8725 10.1653 15.7812C10.2688 15.6282 10.2815 15.5697 10.329 15.0238C10.4356 13.8003 10.7776 12.9004 11.4602 12.0464C12.1823 11.1432 13.1294 10.555 14.2693 10.3017C14.6271 10.2222 14.8098 10.2123 16.3188 10.1915L17.9755 10.1685L18.1418 10.0472C18.2333 9.98044 18.3513 9.84594 18.4041 9.7483L18.5 9.57071L18.4998 7.11979L18.4997 4.66886L18.3953 4.35004C18.1169 3.49978 17.5074 2.88881 16.677 2.62765C16.49 2.56883 16.1025 2.55875 13.2776 2.53906L10.0893 2.51682L9.93295 2.40938C9.82035 2.33195 9.65551 2.11499 9.34318 1.63305C9.10481 1.26517 8.83965 0.884663 8.75398 0.787502C8.53058 0.53412 8.0822 0.243117 7.72051 0.116785L7.40845 0.00778804L5.10571 0.00129208C3.8392 -0.00229465 2.75979 0.00184999 2.70702 0.0104581ZM14.0838 11.9775C13.9867 12.0233 13.5948 12.3851 13.0476 12.9344C12.0537 13.9318 11.9386 14.0915 11.9652 14.4363C11.9738 14.5479 12.0142 14.7048 12.055 14.785C12.172 15.0153 13.9025 16.8423 14.0853 16.9286C14.3751 17.0652 14.7298 17.0019 14.9629 16.7719C15.1698 16.5679 15.1979 16.4686 15.2186 15.8674L15.2378 15.3095L16.6066 15.2895L17.9754 15.2696L18.1418 15.1483C18.5595 14.8436 18.6203 14.2555 18.2748 13.861C18.0801 13.6388 18.0697 13.6372 16.6002 13.6157L15.2378 13.5958L15.2186 13.0379C15.1979 12.4367 15.1698 12.3374 14.9629 12.1334C14.7293 11.9029 14.3751 11.8401 14.0838 11.9775Z"
                    /></svg></a
                >{{ "import" | translate }}
              </button>
        </div>    
      </div>
    </div>
  
    <div class="bottom_bar">
      <div class="table-wrap">
        <div class="table-inner">
          <table
            mat-table
            [dataSource]="pendingdataSource"
            class="mat-elevation-z8"
          >
            <ng-container matColumnDef="lab_centre">
              <th
                mat-header-cell
                *matHeaderCellDef
                (click)="onSortData('labName')"
              >
                {{ "lab_centre" | translate }}
                <span
                  *ngIf="sortColumn === 'labName'"
                  class="material-icons sorticon"
                  >{{ sortIconClass }}</span
                >
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element?.labName ?element?.labName : ("-") }}
              </td>
            </ng-container>
  
            <ng-container matColumnDef="test_name">
              <th
                mat-header-cell
                *matHeaderCellDef
                (click)="onSortData('testName')"
              >
                {{ "test_name" | translate }}
                <span
                  *ngIf="sortColumn === 'testName'"
                  class="material-icons sorticon"
                  >{{ sortIconClass }}</span
                >
              </th>
  
              <td mat-cell *matCellDef="let element">
                {{ element?.testName ?  element?.testName :("-") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="type_of_result">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('testConfiguration')"
                >
                  {{ "type_of_result" | translate }}
                  <span
                    *ngIf="sortColumn === 'testConfiguration'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
    
                <td mat-cell *matCellDef="let element">
                  {{element?.testConfiguration.replace("_", ' ')}}

                </td>
              </ng-container>
              <ng-container matColumnDef="high">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('referenceRange[0].high')"
                >
                  {{ "high" | translate }}
                  <span
                    *ngIf="sortColumn === 'referenceRange[0].high'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
    
                <td mat-cell *matCellDef="let element">
                  {{ element?.referenceRange[0]?.high ? element?.referenceRange[0]?.high : ("-") }} 
                </td>
              </ng-container>
              <ng-container matColumnDef="low">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('referenceRange[0].low')"
                >
                  {{ "low" | translate }}
                  <span
                    *ngIf="sortColumn === 'referenceRange[0].low'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
    
                <td mat-cell *matCellDef="let element">
                  {{ element?.referenceRange[0]?.low ?  element?.referenceRange[0]?.low :("-") }}
                </td>
              </ng-container>
              <ng-container matColumnDef="critical_high">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('referenceRange[0].criticalHigh')"
                >
                  {{ "critical_high" | translate }}
                  <span
                    *ngIf="sortColumn === 'referenceRange[0].criticalHigh'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
    
                <td mat-cell *matCellDef="let element">
                  {{ element?.referenceRange[0]?.criticalHigh ? element?.referenceRange[0]?.criticalHigh : ("-") }}                  
                </td>
              </ng-container>
              <ng-container matColumnDef="critical_low">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('referenceRange[0].criticalLow')"
                >
                  {{ "critical_low" | translate }}
                  <span
                    *ngIf="sortColumn === 'referenceRange[0].criticalLow'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
    
                <td mat-cell *matCellDef="let element">
                  {{ element?.referenceRange[0]?.criticalLow ? element?.referenceRange[0]?.criticalLow : ("-")}}
            
                </td>
              </ng-container>
              <ng-container matColumnDef="interpretive_data">
                <th
                  mat-header-cell
                  *matHeaderCellDef
                  (click)="onSortData('alphaResult')"
                >
                  {{ "alpha_results" | translate }}
                  <span
                    *ngIf="sortColumn === 'alphaResult'"
                    class="material-icons sorticon"
                    >{{ sortIconClass }}</span
                  >
                </th>
    
                <td mat-cell *matCellDef="let element">
                  {{ element?.alphaResult }}
                </td>
              </ng-container>              
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>
                {{ "action" | translate }}
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="icon_group">
                  <ng-container *ngIf="giveInnerPermission('edit')">
                    <a class="svgicon" (click)="routeToedit(element?._id)">
                      <svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M10.5142 0.0229199C10.3428 0.0573628 10.1536 0.141476 10.0166 0.244171C9.94218 0.300012 9.72307 0.505285 9.52976 0.700352L9.17827 1.05501L10.063 1.94044L10.9477 2.82587L11.3237 2.45061C11.7438 2.03136 11.8395 1.90759 11.9242 1.6743C12.0906 1.21545 11.979 0.720952 11.6302 0.371924C11.3334 0.0748893 10.9118 -0.0569464 10.5142 0.0229199ZM6.64187 3.59457C5.03559 5.20381 4.6412 5.61079 4.62404 5.67686C4.61229 5.72203 4.52518 6.14963 4.43044 6.62709C4.31571 7.20542 4.26371 7.51693 4.27468 7.56031C4.29571 7.64339 4.36459 7.71235 4.44763 7.7334C4.5351 7.75559 6.32498 7.39974 6.41623 7.34202C6.45238 7.31917 7.36806 6.41253 8.4511 5.32729L10.4203 3.35415L9.54134 2.47426C9.05794 1.99034 8.65701 1.59439 8.65039 1.59439C8.64378 1.59439 7.73994 2.49446 6.64187 3.59457ZM1.27858 2.01904C0.801035 2.08971 0.368127 2.40948 0.154276 2.84954C-0.00886787 3.18522 -0.00024066 2.95256 0.000204767 7.00711C0.000673638 11.0892 -0.00959462 10.8343 0.168764 11.1905C0.339315 11.5312 0.644737 11.7944 1.03519 11.9371L1.20715 12H4.99328H8.7794L8.96695 11.9363C9.45195 11.7716 9.813 11.3872 9.9558 10.8835C9.99568 10.7429 9.99847 10.5901 9.99847 8.54919V6.36534L9.92778 6.25089C9.82569 6.08565 9.65157 5.9963 9.46356 6.01273C9.29873 6.02711 9.17157 6.10357 9.07852 6.2443L9.01384 6.34207L9.00212 8.50235C8.9914 10.4772 8.98697 10.6689 8.95056 10.7354C8.8943 10.8382 8.76044 10.9493 8.65672 10.9794C8.59422 10.9975 7.50926 11.0029 4.94437 10.998L1.32036 10.9911L1.22857 10.927C1.1781 10.8917 1.11044 10.8238 1.07821 10.7762L1.0196 10.6896L1.01353 7.03304C1.0076 3.46853 1.00858 3.37432 1.0524 3.28904C1.07713 3.24094 1.12735 3.17309 1.16396 3.13829C1.31372 2.99606 1.21017 3.00214 3.48356 3.00214C5.06037 3.00214 5.58551 2.99517 5.6587 2.97328C5.79228 2.93335 5.9376 2.78251 5.9765 2.64347C6.03895 2.42022 5.94597 2.18618 5.7487 2.07014L5.63797 2.00498L3.52806 2.00168C2.3676 1.99987 1.35533 2.00766 1.27858 2.01904Z"
                        />
                      </svg>
                    </a>
                  </ng-container>
                  <ng-container *ngIf="giveInnerPermission('delete')">
                    <a
                      class="svgicon"
                      (click)="
                        openVerticallyCentereddetale(
                          deletemodal,
                          element?._id
                        )
                      "
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="19"
                        height="19"
                        viewBox="0 0 19 19"
                        fill="none"
                      >
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M15.6025 4.45371C15.8943 4.45371 16.1372 4.69596 16.1372 5.0042V5.2892C16.1372 5.58995 15.8943 5.8397 15.6025 5.8397H3.1726C2.8801 5.8397 2.63721 5.58995 2.63721 5.2892V5.0042C2.63721 4.69596 2.8801 4.45371 3.1726 4.45371H5.35938C5.80359 4.45371 6.19018 4.13796 6.29011 3.69247L6.40463 3.18097C6.58261 2.48423 7.16833 2.02148 7.83866 2.02148H10.9358C11.5988 2.02148 12.1911 2.48423 12.3625 3.14422L12.485 3.69172C12.5842 4.13796 12.9708 4.45371 13.4158 4.45371H15.6025ZM14.4916 14.872C14.7199 12.7443 15.1196 7.68933 15.1196 7.63833C15.1342 7.48383 15.0839 7.33758 14.9839 7.21983C14.8767 7.10958 14.741 7.04433 14.5915 7.04433H4.1886C4.03834 7.04433 3.89537 7.10958 3.79617 7.21983C3.69551 7.33758 3.64591 7.48383 3.65321 7.63833C3.65455 7.6477 3.66889 7.82576 3.69287 8.12345C3.79939 9.44588 4.09608 13.1291 4.2878 14.872C4.42347 16.156 5.26594 16.963 6.48625 16.9922C7.42793 17.014 8.39805 17.0215 9.39005 17.0215C10.3244 17.0215 11.2734 17.014 12.2442 16.9922C13.5069 16.9705 14.3486 16.1777 14.4916 14.872Z"
                        />
                      </svg>
                    </a>
                  </ng-container>
                </div>
              </td>
            </ng-container>
  
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
        </div>
        <div *ngIf="pendingdataSource?.length === 0" class="text-center">
          <b>{{ "no_record_found" | translate }}</b>
        </div>
        <mat-paginator
          #paginator
          class="pagination"
          [length]="totalLength"
          (page)="handlePageEvent($event)"
          [pageSize]="pageSize"
          [pageSizeOptions]="[2, 5, 10, 20]"
          showFirstLastButtons
        >
        </mat-paginator>
      </div>
    </div>
  </div>
  
  <!-- Delete modal -->
  <ng-template #deletemodal let-modal>
    <div class="custome_modal action_modals">
      <div class="modal-body">
        <div class="delete_screen text-center">
          <div class="image delete">
            <img
              class="img-fluid"
              src="../../../../assets/img/delete.svg"
              alt=""
            />
          </div>
          <p class="heading delete">{{ "are_you_sure" | translate }}</p>
          <p>
            {{ "you_want_to_delete_this_test" | translate }}
          </p>
          <div class="primary_btn mt-30">
            <button
              type="button"
              class="btn btn-secondary"
              (click)="modal.dismiss('Cross click')"
            >
              {{ "no" | translate }}
            </button>
            <button type="button" class="btn btn-primary" (click)="deleteRadioTest()">
              {{ "yes" | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-template>


    <!-- import popup-->
    <ng-template #importSubTest let-modal>
      <div class="custome_modal">
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">{{ "upload_excel_file" | translate }}</h4>
          <button
            type="button"
            class="btn-close"
            aria-label="Close"
            (click)="closePopup()"
          >
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <div class="modal-body import_services">
          <form [formGroup]="teamExcelForm" (ngSubmit)="excleSubmit()">
            <div class="modal_content  flex-column mb-3">           
            <div class="row modal_content_inner">
              <div class="col-sm-12  mb-3">
                <div class="form_field_wrapper">
                  <label
                    >{{ "lab_centre" | translate
                    }}<span class="danger">*</span></label
                  >
                  <select2
                    [placeholder]="'select_centre' | translate"
                    [overlay]="true"
                    [limitSelection]="0"
                    [minCountForSearch]="1"
                    [data]="labUserList"
                    (update)="onSelect2Change($event)"
                    [value]="selecteduser"
                    formControlName="lab_centre"
                  >
                  </select2>
                  <mat-error
                  *ngIf="
                    isSubmitted &&
                    teamExcelForm.get('lab_centre').hasError('required')
                  "
                  >{{ "select_centre" | translate }}</mat-error
                >
                </div>
              </div>
              <div class="col-sm-6 upload_item">
                <div class="form_field_wrapper">
                  <div class="upload_input">
                    <div class="upload_input_content">
                      <label>
                        <a class="btn_svg"
                          ><svg
                            width="19"
                            height="17"
                            viewBox="0 0 19 17"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              fill-rule="evenodd"
                              clip-rule="evenodd"
                              d="M2.70702 0.0104581C2.35458 0.068045 2.14937 0.132128 1.86268 0.274083C1.40132 0.502557 0.97754 0.942847 0.758933 1.42088C0.482758 2.0248 0.50022 1.57399 0.50022 8.09617C0.50022 12.9014 0.509776 14.035 0.55184 14.2135C0.717983 14.9191 1.21541 15.5686 1.8243 15.875C2.38912 16.1593 2.18433 16.1464 6.14194 16.1464H9.71119L9.88221 16.0467C9.97624 15.9919 10.1037 15.8725 10.1653 15.7812C10.2688 15.6282 10.2815 15.5697 10.329 15.0238C10.4356 13.8003 10.7776 12.9004 11.4602 12.0464C12.1823 11.1432 13.1294 10.555 14.2693 10.3017C14.6271 10.2222 14.8098 10.2123 16.3188 10.1915L17.9755 10.1685L18.1418 10.0472C18.2333 9.98044 18.3513 9.84594 18.4041 9.7483L18.5 9.57071L18.4998 7.11979L18.4997 4.66886L18.3953 4.35004C18.1169 3.49978 17.5074 2.88881 16.677 2.62765C16.49 2.56883 16.1025 2.55875 13.2776 2.53906L10.0893 2.51682L9.93295 2.40938C9.82035 2.33195 9.65551 2.11499 9.34318 1.63305C9.10481 1.26517 8.83965 0.884663 8.75398 0.787502C8.53058 0.53412 8.0822 0.243117 7.72051 0.116785L7.40845 0.00778804L5.10571 0.00129208C3.8392 -0.00229465 2.75979 0.00184999 2.70702 0.0104581ZM14.0838 11.9775C13.9867 12.0233 13.5948 12.3851 13.0476 12.9344C12.0537 13.9318 11.9386 14.0915 11.9652 14.4363C11.9738 14.5479 12.0142 14.7048 12.055 14.785C12.172 15.0153 13.9025 16.8423 14.0853 16.9286C14.3751 17.0652 14.7298 17.0019 14.9629 16.7719C15.1698 16.5679 15.1979 16.4686 15.2186 15.8674L15.2378 15.3095L16.6066 15.2895L17.9754 15.2696L18.1418 15.1483C18.5595 14.8436 18.6203 14.2555 18.2748 13.861C18.0801 13.6388 18.0697 13.6372 16.6002 13.6157L15.2378 13.5958L15.2186 13.0379C15.1979 12.4367 15.1698 12.3374 14.9629 12.1334C14.7293 11.9029 14.3751 11.8401 14.0838 11.9775Z"
                            /></svg></a
                        >{{ "import_excel" | translate }}
                      </label>
                      {{ "selcted" | translate }} {{ selectedFiles?.name }}
                      {{ "file" | translate }}
                    </div>
                    <input
                      (change)="fileChange($event)"
                      formControlName="subtestfile"
                      class="ng-hide user_upload_input"
                      accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                      id="input-file-id"
                      type="file"
                    />
                    <mat-error
                      *ngIf="
                        isSubmitted &&
                        teamExcelForm.get('subtestfile').hasError('required')
                      "
                      >{{ "excel_required" | translate }}</mat-error
                    >
                  </div>
                </div>
              </div>
              <div class="download_content col-sm-6">
                <button
                  type="button"
                  placement="top"
                  class="btn btn-primary"
                  (click)="downLoadExcel()"
                >
                  {{ "download_sample_excel_file" | translate }}
                </button>
              </div>
              <div class="pt-20">
                <i>{{ "note_only_excel_file_allowed" | translate }}</i>
              </div>
            </div>
          </div>
            <div class="primary_btn">
              <button
                type="button"
                class="btn btn-secondary"
                (click)="closePopup()"
              >
                {{ "cancel" | translate }}
              </button>
              <button type="submit" class="btn btn-primary">
                {{ "import_file" | translate }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </ng-template>
  
  